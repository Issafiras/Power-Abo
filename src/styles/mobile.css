/**
 * Mobile-optimized styles
 * Touch targets, swipe gestures, bottom sheets
 */

/* Touch target improvements - WCAG AAA compliance */
@media (max-width: 900px) {
  /* Ensure all interactive elements meet 44x44px minimum */
  button,
  a,
  input[type="button"],
  input[type="submit"],
  input[type="checkbox"],
  input[type="radio"],
  label {
    min-height: 44px;
    min-width: 44px;
  }

  /* Links should have minimum touch area */
  a:not(.btn) {
    display: inline-flex;
    align-items: center;
    min-height: 44px;
    padding: var(--spacing-xs) var(--spacing-sm);
  }

  /* Input fields larger for easier typing */
  input[type="text"],
  input[type="number"],
  input[type="email"],
  input[type="tel"],
  input[type="search"],
  textarea,
  select {
    min-height: 48px;
    font-size: 16px; /* Prevent zoom on iOS */
    padding: var(--spacing-md);
  }

  /* Larger checkbox/radio for easier selection */
  input[type="checkbox"],
  input[type="radio"] {
    width: 20px;
    height: 20px;
    min-width: 20px;
    min-height: 20px;
  }

  /* Better spacing for thumb reach */
  .plans-grid {
    gap: var(--spacing-md) !important;
    padding-bottom: var(--spacing-2xl) !important; /* Extra space for bottom buttons */
  }

  /* Lower buttons positioning */
  .cart-comparison-grid {
    margin-bottom: calc(var(--spacing-2xl) + env(safe-area-inset-bottom)) !important;
  }

  /* Auto-select button larger and fixed at bottom on mobile - Forbedret UX */
  .auto-select-btn {
    position: sticky !important;
    bottom: calc(var(--spacing-md) + env(safe-area-inset-bottom)) !important;
    width: calc(100% - 2 * var(--spacing-md)) !important;
    margin: var(--spacing-md) !important;
    z-index: var(--z-sticky) !important;
    box-shadow: 
      0 -4px 24px rgba(0, 0, 0, 0.4),
      0 -8px 40px rgba(255, 109, 31, 0.5),
      0 0 0 2px rgba(255, 109, 31, 0.2) !important;
    min-height: 56px !important; /* Extra large for primary action - WCAG AAA */
    font-size: var(--font-lg) !important;
    padding: var(--spacing-lg) var(--spacing-xl) !important;
    border: 2px solid rgba(255, 255, 255, 0.25) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  }

  /* Stærkere pulsing på mobil når klar - Forbedret visuel feedback */
  .auto-select-btn--ready {
    box-shadow: 
      0 -4px 24px rgba(0, 0, 0, 0.4),
      0 -8px 40px rgba(255, 109, 31, 0.7),
      0 0 0 4px rgba(255, 109, 31, 0.4),
      0 0 0 8px rgba(255, 109, 31, 0.2) !important;
    animation: mobilePulse 2s ease-in-out infinite !important;
  }

  @keyframes mobilePulse {
    0%, 100% {
      box-shadow: 
        0 -4px 24px rgba(0, 0, 0, 0.4),
        0 -8px 40px rgba(255, 109, 31, 0.7),
        0 0 0 4px rgba(255, 109, 31, 0.4),
        0 0 0 8px rgba(255, 109, 31, 0.2);
    }
    50% {
      box-shadow: 
        0 -6px 32px rgba(0, 0, 0, 0.5),
        0 -12px 56px rgba(255, 109, 31, 0.9),
        0 0 0 6px rgba(255, 109, 31, 0.6),
        0 0 0 12px rgba(255, 109, 31, 0.3);
    }
  }

  /* Toast notifications - full width på mobil */
  /* react-hot-toast bruger data attributes */
  div[style*="position: fixed"] {
    max-width: calc(100% - 2 * var(--spacing-md)) !important;
  }
  
  /* Target react-hot-toast container */
  body > div[data-sonner-toaster] {
    width: calc(100% - 2 * var(--spacing-md)) !important;
    max-width: none !important;
    left: var(--spacing-md) !important;
    right: var(--spacing-md) !important;
    bottom: calc(var(--spacing-md) + env(safe-area-inset-bottom)) !important;
  }

  body > div[data-sonner-toaster] > div {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
  }
}

/* Safe area support for iOS notch */
@supports (padding: env(safe-area-inset-bottom)) {
  @media (max-width: 900px) {
    .apple-header {
      padding-top: env(safe-area-inset-top);
    }

    .main-content {
      padding-bottom: env(safe-area-inset-bottom);
    }
  }
}

/* Reduced animation complexity on mobile */
@media (max-width: 900px) {
  /* Simplify framer-motion animations */
  [data-reduce-motion] *,
  [data-reduce-motion] *::before,
  [data-reduce-motion] *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  /* Disable complex animations on mobile */
  .animate-scale-in,
  .animate-fade-in-up,
  .animate-bounce-in,
  .animate-slide-in-left,
  .animate-slide-in-right {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }

  /* Simplify framer-motion animations */
  [class*="motion-"] {
    animation-duration: 0.2s !important;
  }
}

/* Horizontal swipe gestures for streaming services */
@media (max-width: 900px) {
  .streaming-selector {
    position: relative;
  }

  .streaming-grid {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }

  /* Snap scrolling for better UX */
  .streaming-grid > * {
    scroll-snap-align: start;
  }
}

